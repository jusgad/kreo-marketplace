# ==============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Este archivo es una PLANTILLA para el ambiente de producción
# NUNCA commitear este archivo con valores reales
# Usar secrets management (AWS Secrets Manager, Vault, etc.)
# ==============================================================================

# ==============================================================================
# ENVIRONMENT
# ==============================================================================
NODE_ENV=production

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
POSTGRES_DB=kreo_production_db
POSTGRES_USER=kreo_prod
POSTGRES_PASSWORD=USE_SECRETS_MANAGER_O_VAULT
POSTGRES_PORT=5432
DATABASE_URL=postgresql://kreo_prod:USE_SECRETS_MANAGER@postgres:5432/kreo_production_db

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=USE_SECRETS_MANAGER_O_VAULT
REDIS_URL=redis://:USE_SECRETS_MANAGER@redis:6379

# ==============================================================================
# ELASTICSEARCH CONFIGURATION
# ==============================================================================
ELASTICSEARCH_PORT=9200
ELASTIC_PASSWORD=USE_SECRETS_MANAGER_O_VAULT
ELASTICSEARCH_URL=http://elastic:USE_SECRETS_MANAGER@elasticsearch:9200

# ==============================================================================
# JWT CONFIGURATION
# ==============================================================================
# CRÍTICO: DEBE ser generado con: openssl rand -base64 32
# Rotar cada 90 días
JWT_ACCESS_SECRET=USE_SECRETS_MANAGER_O_VAULT
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_SECRET=USE_SECRETS_MANAGER_O_VAULT_DIFERENTE
JWT_REFRESH_EXPIRES_IN=7d

# Legacy support
JWT_SECRET=USE_SECRETS_MANAGER_O_VAULT
JWT_EXPIRES_IN=7d

# ==============================================================================
# SESSION CONFIGURATION
# ==============================================================================
SESSION_SECRET=USE_SECRETS_MANAGER_O_VAULT

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================
ALLOWED_ORIGINS=https://kreo.com,https://www.kreo.com,https://vendor.kreo.com

# ==============================================================================
# RATE LIMITING
# ==============================================================================
ENABLE_RATE_LIMITING=true
LOGIN_RATE_LIMIT_MAX=5
LOGIN_RATE_LIMIT_WINDOW=60
REGISTER_RATE_LIMIT_MAX=3
REGISTER_RATE_LIMIT_WINDOW=3600

# ==============================================================================
# PAYMENT SERVICES
# ==============================================================================
# Stripe (LIVE KEYS - mantener en secrets manager)
STRIPE_SECRET_KEY=USE_SECRETS_MANAGER
STRIPE_WEBHOOK_SECRET=USE_SECRETS_MANAGER
STRIPE_PUBLISHABLE_KEY=pk_live_COMPLETAR

# ==============================================================================
# AWS SERVICES
# ==============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=USE_IAM_ROLES_OR_SECRETS_MANAGER
AWS_SECRET_ACCESS_KEY=USE_IAM_ROLES_OR_SECRETS_MANAGER
AWS_S3_BUCKET=kreo-marketplace-production

# ==============================================================================
# EMAIL SERVICES
# ==============================================================================
SENDGRID_API_KEY=USE_SECRETS_MANAGER
SENDGRID_FROM_EMAIL=noreply@kreo.com

# ==============================================================================
# SMS SERVICES
# ==============================================================================
TWILIO_ACCOUNT_SID=USE_SECRETS_MANAGER
TWILIO_AUTH_TOKEN=USE_SECRETS_MANAGER
TWILIO_PHONE_NUMBER=+1234567890

# ==============================================================================
# SHIPPING SERVICES
# ==============================================================================
SHIPPO_API_KEY=USE_SECRETS_MANAGER

# ==============================================================================
# FRONTEND URLS
# ==============================================================================
CUSTOMER_APP_URL=https://kreo.com
VENDOR_PORTAL_URL=https://vendor.kreo.com
CUSTOMER_APP_API_URL=https://api.kreo.com/api
VENDOR_PORTAL_API_URL=https://api.kreo.com/api

# ==============================================================================
# API GATEWAY
# ==============================================================================
API_GATEWAY_URL=https://api.kreo.com

# ==============================================================================
# LOGGING
# ==============================================================================
LOG_LEVEL=warn
ENABLE_REQUEST_LOGGING=false

# ==============================================================================
# SECURITY
# ==============================================================================
IP_BLOCK_DURATION=86400
MAX_FAILED_ATTEMPTS=3
ENABLE_2FA=true

# ==============================================================================
# MONITORING
# ==============================================================================
GRAFANA_PASSWORD=USE_SECRETS_MANAGER

# ==============================================================================
# BACKUP CONFIGURATION
# ==============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=kreo-backups-production

# ==============================================================================
# ALERTING
# ==============================================================================
SLACK_WEBHOOK_URL=USE_SECRETS_MANAGER
PAGERDUTY_API_KEY=USE_SECRETS_MANAGER

# ==============================================================================
# SSL/TLS
# ==============================================================================
SSL_CERTIFICATE_PATH=/etc/ssl/certs/kreo.crt
SSL_CERTIFICATE_KEY_PATH=/etc/ssl/private/kreo.key
